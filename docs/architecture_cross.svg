<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="760" viewBox="0 0 1200 760">
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#4b5563" />
    </marker>
    <linearGradient id="nodeBlue" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0%" stop-color="#e8f2ff"/>
      <stop offset="100%" stop-color="#cfe3ff"/>
    </linearGradient>
    <linearGradient id="nodePurple" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0%" stop-color="#efe9ff"/>
      <stop offset="100%" stop-color="#dcd2ff"/>
    </linearGradient>
    <linearGradient id="nodeGreen" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0%" stop-color="#e7f9ef"/>
      <stop offset="100%" stop-color="#c9f1da"/>
    </linearGradient>
    <linearGradient id="nodeOrange" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0%" stop-color="#ffe9d6"/>
      <stop offset="100%" stop-color="#ffd2a8"/>
    </linearGradient>
    <style>
      .lane-label { fill:#fde68a; stroke:#f59e0b; stroke-width:1; }
      .lane-text { font: 18px Arial, sans-serif; fill:#111827; font-weight:bold; text-anchor:middle; dominant-baseline:middle; }
      .title { font: 22px Arial, sans-serif; fill:#0f172a; font-weight:bold; }
      .node { fill:url(#nodeBlue); stroke:#6b7280; stroke-width:1; }
      .node-purple { fill:url(#nodePurple); stroke:#6b7280; stroke-width:1; }
      .node-green { fill:url(#nodeGreen); stroke:#6b7280; stroke-width:1; }
      .node-orange { fill:url(#nodeOrange); stroke:#6b7280; stroke-width:1; }
      .label { font: 13px Arial, sans-serif; fill:#111827; }
      .small { font: 12px Arial, sans-serif; fill:#111827; }
      .lane-line { stroke:#d1d5db; stroke-width:1; }
      .border { stroke:#9ca3af; stroke-width:1; fill:#ffffff; }
      .arrow { stroke:#4b5563; stroke-width:1.5; fill:none; marker-end:url(#arrow); }
      .arrow-dash { stroke:#4b5563; stroke-width:1.5; fill:none; stroke-dasharray:6 6; marker-end:url(#arrow); }
    </style>
  </defs>

  <!-- Border -->
  <rect x="10" y="10" width="1180" height="740" class="border" />

  <!-- Lane separators -->
  <line x1="10" y1="120" x2="1190" y2="120" class="lane-line" />
  <line x1="10" y1="240" x2="1190" y2="240" class="lane-line" />
  <line x1="10" y1="360" x2="1190" y2="360" class="lane-line" />
  <line x1="10" y1="480" x2="1190" y2="480" class="lane-line" />
  <line x1="10" y1="600" x2="1190" y2="600" class="lane-line" />

  <!-- Lane labels (left column) -->
  <rect x="10" y="10" width="70" height="110" class="lane-label" />
  <rect x="10" y="120" width="70" height="120" class="lane-label" />
  <rect x="10" y="240" width="70" height="120" class="lane-label" />
  <rect x="10" y="360" width="70" height="120" class="lane-label" />
  <rect x="10" y="480" width="70" height="120" class="lane-label" />
  <rect x="10" y="600" width="70" height="150" class="lane-label" />

  <g transform="translate(45,65) rotate(-90)">
    <text class="lane-text">User</text>
  </g>
  <g transform="translate(45,180) rotate(-90)">
    <text class="lane-text">CLI</text>
  </g>
  <g transform="translate(45,300) rotate(-90)">
    <text class="lane-text">Pipeline</text>
  </g>
  <g transform="translate(45,420) rotate(-90)">
    <text class="lane-text">Models</text>
  </g>
  <g transform="translate(45,540) rotate(-90)">
    <text class="lane-text">
      <tspan x="0" dy="-10">Vector</tspan>
      <tspan x="0" dy="22">Store</tspan>
    </text>
  </g>
  <g transform="translate(45,675) rotate(-90)">
    <text class="lane-text">Config</text>
  </g>

  <!-- User lane nodes -->
  <rect x="120" y="40" width="160" height="50" rx="6" ry="6" class="node-green" />
  <text x="200" y="70" text-anchor="middle" class="label">Provide Documents</text>

  <rect x="340" y="40" width="160" height="50" rx="6" ry="6" class="node" />
  <text x="420" y="70" text-anchor="middle" class="label">Ask / Inspect</text>

  <!-- CLI lane nodes -->
  <rect x="120" y="150" width="150" height="50" rx="6" ry="6" class="node" />
  <text x="195" y="180" text-anchor="middle" class="label">ragopslab ingest</text>

  <rect x="310" y="150" width="150" height="50" rx="6" ry="6" class="node" />
  <text x="385" y="180" text-anchor="middle" class="label">ragopslab chat</text>

  <rect x="500" y="150" width="150" height="50" rx="6" ry="6" class="node" />
  <text x="575" y="180" text-anchor="middle" class="label">ragopslab list</text>

  <rect x="690" y="150" width="170" height="50" rx="6" ry="6" class="node" />
  <text x="775" y="180" text-anchor="middle" class="label">ragopslab sources</text>

  <!-- Pipeline lane nodes -->
  <rect x="120" y="270" width="160" height="50" rx="6" ry="6" class="node-purple" />
  <text x="200" y="292" text-anchor="middle" class="small">Loaders</text>
  <text x="200" y="310" text-anchor="middle" class="small">txt/md/pdf/csv/json</text>

  <rect x="320" y="270" width="150" height="50" rx="6" ry="6" class="node-purple" />
  <text x="395" y="292" text-anchor="middle" class="small">Chunking</text>
  <text x="395" y="310" text-anchor="middle" class="small">size / overlap</text>

  <rect x="510" y="270" width="170" height="50" rx="6" ry="6" class="node-purple" />
  <text x="595" y="292" text-anchor="middle" class="small">LangGraph</text>
  <text x="595" y="310" text-anchor="middle" class="small">(optional)</text>

  <rect x="720" y="270" width="160" height="50" rx="6" ry="6" class="node-purple" />
  <text x="800" y="292" text-anchor="middle" class="small">Retriever</text>
  <text x="800" y="310" text-anchor="middle" class="small">top-k</text>

  <!-- Models lane nodes -->
  <rect x="120" y="390" width="180" height="50" rx="6" ry="6" class="node" />
  <text x="210" y="412" text-anchor="middle" class="small">Embeddings</text>
  <text x="210" y="430" text-anchor="middle" class="small">nomic-embed-text</text>

  <rect x="720" y="390" width="180" height="50" rx="6" ry="6" class="node" />
  <text x="810" y="412" text-anchor="middle" class="small">Chat LLM</text>
  <text x="810" y="430" text-anchor="middle" class="small">llama3.1:8b</text>

  <rect x="940" y="390" width="190" height="50" rx="6" ry="6" class="node" />
  <text x="1035" y="420" text-anchor="middle" class="label">Answer + citations</text>

  <!-- Vector store lane nodes -->
  <rect x="110" y="510" width="200" height="60" rx="12" ry="12" class="node-orange" />
  <text x="210" y="545" text-anchor="middle" class="label">Chroma DB</text>

  <!-- Config lane nodes -->
  <rect x="120" y="640" width="180" height="50" rx="6" ry="6" class="node" />
  <text x="210" y="670" text-anchor="middle" class="label">config.yaml</text>

  <!-- Flows -->
  <path class="arrow" d="M 200 90 L 200 150" />
  <path class="arrow" d="M 420 90 L 420 150" />

  <path class="arrow" d="M 195 200 L 195 270" />
  <path class="arrow" d="M 385 200 L 385 250 L 595 250 L 595 270" />

  <path class="arrow" d="M 280 295 L 320 295" />
  <path class="arrow" d="M 470 295 L 510 295" />
  <path class="arrow" d="M 680 295 L 720 295" />

  <path class="arrow" d="M 395 320 L 395 350 L 210 350 L 210 390" />
  <path class="arrow" d="M 210 440 L 210 510" />

  <path class="arrow" d="M 800 320 L 800 390" />
  <path class="arrow" d="M 900 415 L 940 415" />

  <path class="arrow" d="M 575 200 L 575 230 L 490 230 L 490 525 L 310 525" />
  <path class="arrow" d="M 775 200 L 775 230 L 700 230 L 700 545 L 310 545" />
  <path class="arrow" d="M 880 295 L 910 295 L 910 565 L 310 565" />

  <!-- Config influence (dashed) -->
  <path class="arrow-dash" d="M 210 440 L 210 470 L 90 470 L 90 665 L 120 665" />
  <path class="arrow-dash" d="M 595 320 L 595 360 L 90 360 L 90 665 L 120 665" />
  <path class="arrow-dash" d="M 385 200 L 385 240 L 90 240 L 90 665 L 120 665" />
</svg>
